<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tutorials/send-to-node">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Tutorial: Create a schema | p2panda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://p2panda.org/handbook/tutorials/send-to-node"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tutorial: Create a schema | p2panda"><meta data-rh="true" name="description" content="In this tutorial we want to register a new schema on a p2panda node and create our first document with it! We will use the send-to-node command line tool and aquadoggo node for this."><meta data-rh="true" property="og:description" content="In this tutorial we want to register a new schema on a p2panda node and create our first document with it! We will use the send-to-node command line tool and aquadoggo node for this."><link data-rh="true" rel="icon" href="/handbook/images/deepsea-panda.svg"><link data-rh="true" rel="canonical" href="https://p2panda.org/handbook/tutorials/send-to-node"><link data-rh="true" rel="alternate" href="https://p2panda.org/handbook/tutorials/send-to-node" hreflang="en"><link data-rh="true" rel="alternate" href="https://p2panda.org/handbook/tutorials/send-to-node" hreflang="x-default"><link rel="stylesheet" href="/handbook/assets/css/styles.b2839b12.css">
<link rel="preload" href="/handbook/assets/js/runtime~main.a3bcc455.js" as="script">
<link rel="preload" href="/handbook/assets/js/main.60f7bf1f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><div class="navbar__brand"><div class="navbar__logo"><img src="/handbook/images/neon-panda.svg" class="themedImage_ToTc themedImage--light_HNdA"><img src="/handbook/images/neon-panda.svg" class="themedImage_ToTc themedImage--dark_i4oU"></div></div></button><a class="navbar__brand" href="/handbook/"><div class="navbar__logo"><img src="/handbook/images/neon-panda.svg" alt="p2panda Handbook" class="themedImage_ToTc themedImage--light_HNdA"><img src="/handbook/images/neon-panda.svg" alt="p2panda Handbook" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/handbook/about/">About</a><a class="navbar__item navbar__link" href="/handbook/learn/">Learn</a><a class="navbar__item navbar__link" href="/handbook/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/handbook/libraries/">Libraries</a><a class="navbar__item navbar__link" href="/handbook/specification/">Specification</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/handbook/faq">FAQ</a><a class="navbar__item navbar__link" href="/handbook/links">Links</a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tutorial: Create a schema</h1></header><p>In this tutorial we want to register a new schema on a p2panda node and create our first document with it! We will use the <a href="https://github.com/p2panda/send-to-node" target="_blank" rel="noopener noreferrer"><code>send-to-node</code></a> command line tool and <a href="https://github.com/p2panda/aquadoggo" target="_blank" rel="noopener noreferrer"><code>aquadoggo</code></a> node for this.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-do-i-need">What do I need?<a class="hash-link" href="#what-do-i-need" title="Direct link to heading">‚Äã</a></h2><ul><li>Rust</li><li>Terminal</li><li>Browser</li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>How do I install Rust?</summary><div><div class="collapsibleContent_i85q"><p>Make sure you have have a working Rust environment installed on your computer before you begin with the tutorial. You can check this by running <code>rustc --version</code> in your terminal. This tutorial was written with Rust version <code>1.63.0</code> but it will probably also work with other versions.</p><p>If you don&#x27;t have Rust installed yet you can follow the steps on the official Rust website: <a href="https://www.rust-lang.org/tools/install" target="_blank" rel="noopener noreferrer">How to install Rust</a>.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêº</span></span>Never worked with Rust before?</div><div class="admonitionContent_S0QG"><p>This tutorial requires you to have a working Rust environment. If you have never worked with Rust before this is no problem! Setting it up is fairly easy and besides of using some basic command line commands there is no more Rust knowledge required to make <code>aquadoggo</code> and <code>send-to-node</code> run on your computer.</p></div></div></div></div></details><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-send-to-node">What is <code>send-to-node</code>?<a class="hash-link" href="#what-is-send-to-node" title="Direct link to heading">‚Äã</a></h2><p><code>send-to-node</code> is the most minimal program to send data to an p2panda node. It takes the data you want to send, signs it with a private key and sends it to the node via GraphQL. It is great for doing very <em>basic</em> things with p2panda, especially if you want to learn how everything works!</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêª‚Äç‚ùÑÔ∏è</span></span>More tools</div><div class="admonitionContent_S0QG"><p>In the future you will probably not do <em>everything</em> with <code>send-to-node</code> as it is may be even too minimal and therefore tedious to do more involved tasks, like creating complex schemas. But for learning, testing and understanding it is really great.</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-does-it-work">How does it work?<a class="hash-link" href="#how-does-it-work" title="Direct link to heading">‚Äã</a></h3><p>Let&#x27;s have a quick look at the <a href="https://github.com/p2panda/send-to-node/blob/main/src/main.rs" target="_blank" rel="noopener noreferrer">source code of <code>send-to-node</code></a>. You will notice that it is a fairly small program where most of the code is about parsing user input and preparing everything we need to make GraphQL queries.</p><p>Let&#x27;s look at the interesting bits! The program ..</p><ol><li>Checks if a file with a private key inside exists (encoded as a hexadecimal string). The default path is <code>key.txt</code>. If it exists, we derive the key pair from it, if it doesn&#x27;t, we generate a new key pair and store it under that path.</li><li>Reads a JSON-formatted string from <em>stdin</em> which gets deserialized into a p2panda operation. Operations are the actual data we send around in the network.</li><li>Makes a <code>nextArgs</code> GraphQL query to retreive the latest information from the node we need to create our next entry. You can <a href="/handbook/learn/entries">read more about entries</a> in our learn section.</li><li>Takes the required informations (like <code>seqNum</code>, <code>logId</code>, <code>backlink</code> and <code>skiplink</code>) to encode the operation and entry</li><li>Signs the entry with the given key pair</li><li>Sends the encoded and signed data to the node using the <code>publish</code> GraphQL mutation!</li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêß</span></span>Why JSON?</div><div class="admonitionContent_S0QG"><p>p2panda does not use JSON internally, even though <code>send-to-node</code> works with <code>.json</code> files. It is just the choosen format for this program to create operations. Internally all operations are actually encoded as <a href="http://localhost:3000/handbook/specification/data-types/operations#encoding-format" target="_blank" rel="noopener noreferrer">CBOR</a>.</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-do-i-need" class="table-of-contents__link toc-highlight">What do I need?</a></li><li><a href="#what-is-send-to-node" class="table-of-contents__link toc-highlight">What is <code>send-to-node</code>?</a><ul><li><a href="#how-does-it-work" class="table-of-contents__link toc-highlight">How does it work?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer_J6tW"><img class="footer-img__0Xc" src="/handbook/images/deepsea-panda.svg" width="100"><img class="footer-img__0Xc" src="/handbook/images/service-service.png" width="200"><div><img class="supporters-img_P2oV" src="/handbook/images/ngi-logo.png" width="200"><img class="supporters-img_P2oV" src="/handbook/images/eu-flag-logo.png" width="78"><p class="footer-text_MXRq">This project has received funding from the European Union‚Äôs Horizon 2020 research and innovation programme within the framework of the NGI-POINTER Project funded under grant agreement No 871528</p></div><p class="footer-text_MXRq">CC BY-SA 4.0<!-- --> - <a href="mailto:contributors@p2panda.org">Contact</a></p></footer></div>
<script src="/handbook/assets/js/runtime~main.a3bcc455.js"></script>
<script src="/handbook/assets/js/main.60f7bf1f.js"></script>
</body>
</html>